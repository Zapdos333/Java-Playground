// package
apply plugin: 'maven-publish'
group = 'com.github.Zapdos333'
project.setVersion('1.1.1')
apply plugin: 'java'
publishing {
	publications {
		maven(MavenPublication) {
			groupId = group
			artifactId = 'Java-Playground'
			version = project.getVersion()
			from components.java
		}
	}
}
publish.dependsOn build
// projects
subprojects {
	apply plugin: 'java'
	project.setVersion(project.getRootProject().getVersion())
	compileJava() {}
}
//dependecy management
dependencies {
	implementation('library-general')
	implementation('library-CoordinateSystem') {
		dependencies {
			implementation('library-CClass') 
		}
	}
	implementation('library.CClass')
	implementation('nonLibrary-general') {
		dependencies {
			implementation('library-CClass')
			implementation('library-CoordinateSystem')
			implementation('library-general')
		}
	}
	implementation('nonLibrary-HelloWorld')
	implementation('nonLibrary-school') {
		dependencies {
			implementation('library-general')
		}
	}
	implementation('nonLibrary-tests') {
		dependencies {
			implementation('library-CClass')
		}
	}
}
//main jar
jar {
	archiveFileName = "${project.archivesBaseName}-${project.getVersion()}.jar"
	destinationDirectory.set(file("build/libs"))
}
// set main classpath
sourceSets {
	main.java {
		srcDir("./src/java/**/")
		exclude '.history','gradle','com/ext'
	}
}
//debug
task printCheck(){
	doLast{
		println(publish.dependsOn)
	}
}
